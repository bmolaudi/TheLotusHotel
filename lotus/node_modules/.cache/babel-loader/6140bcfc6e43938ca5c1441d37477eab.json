{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mpho\\\\Desktop\\\\AOD\\\\Informatics Project\\\\lotus.zip (1)\\\\src\\\\components\\\\admin\\\\check-out.js\";\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport { getBooking, updateBooking } from '../../config/firebaseConfig';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { useDispatch } from 'react-redux';\nimport { selectuserType, setBooking } from '../../store/reducers/bookingSlice';\nimport { useHistory } from 'react-router-dom';\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nconst CheckOut = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const classes = useStyles(); // getModalStyle is not a pure function, we roll the style only on the first render\n\n  const [modalStyle] = React.useState(getModalStyle);\n  const [open, setOpen] = React.useState(false);\n  const [data, setData] = useState([]);\n  const [response, setResponse] = useState({\n    roomNumber: \"\",\n    numberOfGuests: \"\",\n    Status: \"\",\n    checkIn: \"\",\n    checkOut: \"\",\n    AdditionalInformation: \"\",\n    id: \"\"\n  });\n  const [email, setEmail] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [clicked, setclicked] = useState(\"none\");\n  const [message, setMessage] = React.useState(\"\");\n  const [roomNumber, setRoomNumber] = useState();\n  const [numberOfGuests, SetNumberOfGuests] = useState();\n  const [Status, setStatus] = useState();\n  const [checkIn, setCheckIn] = useState();\n  const [checkOut, setCheckOut] = useState();\n  const [Customer, setCustomer] = useState();\n  const [AdditionalInformation, setAdditionalInformation] = useState();\n  const [id, setId] = useState();\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    dispatch(setBooking({\n      booking: response\n    }));\n    history.push(\"/invoice\"); // dispatch(setUserType({userType: value}));\n  };\n\n  const handleChange = event => {\n    let name = event.target.name;\n    let value = event.target.value;\n\n    if (value !== '') {\n      switch (name) {\n        case \"email\":\n          setEmail(value);\n          break;\n\n        default:\n          //required(value)\n          break;\n      }\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    async function fetchProduct() {\n      await getBooking(email).then(value => {\n        console.log(email);\n\n        if (value !== null) {\n          setResponse(value);\n          setStatus(value.Status);\n          setCheckIn(value.checkIn);\n          setCheckOut(value.checkOut);\n          setRoomNumber(value.roomNumber);\n          setId(value.id);\n          setCustomer(value.Customer);\n          SetNumberOfGuests(value.numberOfGuests);\n          setAdditionalInformation(value.AdditionalInformation);\n          setclicked(\"block\");\n        }\n      }).catch(err => {\n        console.log(err);\n        setMessage(\"Could not find a booking, try again\");\n        handleOpen();\n      });\n      setIsLoading(false);\n    }\n\n    fetchProduct();\n  };\n\n  const handleSubmit2 = async e => {\n    e.preventDefault();\n    console.log(response);\n    await updateBooking(id, Customer, \"CheckedOut\", checkIn, checkOut, numberOfGuests, roomNumber, AdditionalInformation).then(async () => {\n      setTimeout(async function () {\n        // setData(await getBookingDetails());\n        setMessage(\"Checked Out successfully\");\n        handleOpen();\n      }, 400).catch(err => {\n        setMessage(\"Something went wrong please try again\");\n        handleOpen();\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"grey-text text-darken-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"Check In\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn red lighten-2 z-depth-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, \"Look Up\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"red-text center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    p: 1,\n    display: clicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn red lighten-2 z-depth-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, \"Check Out\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"red-text center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    id: \"simple-modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, \"Note\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"simple-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, message))));\n};\n\nexport default CheckOut;","map":{"version":3,"sources":["C:/Users/Mpho/Desktop/AOD/Informatics Project/lotus.zip (1)/src/components/admin/check-out.js"],"names":["React","useState","connect","Redirect","getBooking","updateBooking","Box","makeStyles","Theme","createStyles","Modal","useDispatch","selectuserType","setBooking","useHistory","rand","Math","round","random","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","CheckOut","history","dispatch","classes","modalStyle","open","setOpen","data","setData","response","setResponse","roomNumber","numberOfGuests","Status","checkIn","checkOut","AdditionalInformation","id","email","setEmail","isLoading","setIsLoading","clicked","setclicked","message","setMessage","setRoomNumber","SetNumberOfGuests","setStatus","setCheckIn","setCheckOut","Customer","setCustomer","setAdditionalInformation","setId","handleOpen","handleClose","booking","push","handleChange","event","name","target","value","handleSubmit","e","preventDefault","fetchProduct","then","console","log","catch","err","handleSubmit2","setTimeout"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {getBooking, updateBooking} from '../../config/firebaseConfig';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport {useDispatch} from 'react-redux';\r\nimport {selectuserType, setBooking} from '../../store/reducers/bookingSlice';\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nfunction rand() {\r\n    return Math.round(Math.random() * 20) - 10;\r\n  }\r\n  \r\n  function getModalStyle() {\r\n    const top = 50 + rand();\r\n    const left = 50 + rand();\r\n  \r\n    return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(-${top}%, -${left}%)`,\r\n    };\r\n  }\r\n  \r\n  const useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n      position: 'absolute',\r\n      width: 400,\r\n      backgroundColor: theme.palette.background.paper,\r\n      border: '2px solid #000',\r\n      boxShadow: theme.shadows[5],\r\n      padding: theme.spacing(2, 4, 3),\r\n    },\r\n  }));\r\n  \r\n\r\nconst CheckOut = () => {\r\n    const history = useHistory();\r\n   const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n  // getModalStyle is not a pure function, we roll the style only on the first render\r\n  const [modalStyle] = React.useState(getModalStyle);\r\n  const [open, setOpen] = React.useState(false);\r\n    const  [data, setData] = useState([]);\r\n    const  [response, setResponse] = useState({\r\n           roomNumber: \"\",\r\n           numberOfGuests: \"\",\r\n           Status: \"\",\r\n           checkIn: \"\",\r\n           checkOut: \"\",\r\n           AdditionalInformation: \"\",\r\n           id: \"\",\r\n    });\r\n\r\n    const  [email, setEmail] = useState();\r\n    const [isLoading,setIsLoading] = useState(false);\r\n    const  [clicked, setclicked] = useState(\"none\");\r\n    const [message, setMessage] = React.useState(\"\");\r\n\r\n    const  [roomNumber, setRoomNumber] = useState();\r\n    const  [numberOfGuests, SetNumberOfGuests] = useState();\r\n    const  [Status, setStatus] = useState();\r\n    const  [checkIn, setCheckIn] = useState();\r\n    const  [checkOut, setCheckOut] = useState();\r\n    const  [Customer, setCustomer] = useState();\r\n    const  [AdditionalInformation, setAdditionalInformation] = useState();\r\n    const  [id, setId] = useState();\r\n    \r\n    const handleOpen = () => {\r\n        setOpen(true);\r\n      };\r\n    \r\n      const handleClose = () => {\r\n        setOpen(false);\r\n        dispatch(setBooking({booking:response, }));\r\n        history.push(\"/invoice\");\r\n        // dispatch(setUserType({userType: value}));\r\n\r\n      };\r\n\r\n    const handleChange = (event) => {\r\n        let name = event.target.name;\r\n      let value = event.target.value;\r\n      if (value !== '')\r\n      {\r\n        switch (name) {\r\n         case \"email\":\r\n            setEmail(value);\r\n           break;\r\n         default:\r\n           //required(value)\r\n           break;\r\n        }\r\n      } \r\n    }\r\n    const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n      async function fetchProduct() {\r\n        \r\n        await getBooking(email).then(value =>{\r\n            console.log(email);\r\n          if (value !== null){\r\n          setResponse(value);\r\n          setStatus(value.Status);\r\n          setCheckIn(value.checkIn);\r\n          setCheckOut(value.checkOut);\r\n          setRoomNumber(value.roomNumber);\r\n          setId(value.id);\r\n          setCustomer(value.Customer);\r\n          SetNumberOfGuests(value.numberOfGuests);\r\n          setAdditionalInformation(value.AdditionalInformation);\r\n          setclicked(\"block\");\r\n          }\r\n        }).catch(err =>{\r\n            console.log(err);\r\n            setMessage(\"Could not find a booking, try again\");\r\n            handleOpen();\r\n        \r\n        });\r\n        setIsLoading(false);\r\n      }fetchProduct();\r\n   \r\n    }\r\n    const handleSubmit2 = async (e) => {\r\n        e.preventDefault();\r\n        console.log(response);\r\n        await updateBooking( id, Customer, \"CheckedOut\", checkIn, checkOut, numberOfGuests, roomNumber, AdditionalInformation).then(async () => {\r\n            setTimeout(async function () {\r\n                // setData(await getBookingDetails());\r\n                setMessage(\"Checked Out successfully\");\r\n                handleOpen();\r\n            }, 400).catch(err =>{\r\n                setMessage(\"Something went wrong please try again\");\r\n                handleOpen();\r\n            });\r\n        });\r\n    }\r\n    return (\r\n        \r\n      <div className=\"container\">\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <h5 className=\"grey-text text-darken-3\">Check In</h5>\r\n          <div className=\"input-field\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <input type=\"email\" id=\"email\"value={email} onChange={e => setEmail(e.target.value)} />\r\n          </div>\r\n          {/* <div className=\"input-field\">\r\n            <label htmlFor=\"name\">Name</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              onChange={handleChange}\r\n            />\r\n          </div> */}\r\n          <div className=\"input-field\">\r\n            <button className=\"btn red lighten-2 z-depth-0\">Look Up</button>\r\n          </div>\r\n          <div className=\"red-text center\">\r\n            {/* {authError ? <p>{authError}</p> : null } */}\r\n          </div>\r\n        </form>\r\n        <Box p={1} display={clicked}>\r\n        <form onSubmit={handleSubmit2}>\r\n            \r\n          \r\n    \r\n    \r\n          <div className=\"input-field\">\r\n            <button className=\"btn red lighten-2 z-depth-0\">Check Out</button>\r\n          </div>\r\n          <div className=\"red-text center\">\r\n            {/* {authError ? <p>{authError}</p> : null } */}\r\n          </div>\r\n        </form>\r\n        </Box>\r\n        <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n\r\n<div style={modalStyle} className={classes.paper}>\r\n          <h2 id=\"simple-modal-title\">Note</h2>\r\n          <p id=\"simple-modal-description\">\r\n            {message}\r\n          </p>\r\n        </div>\r\n      </Modal>\r\n\r\n      </div>\r\n      \r\n    );\r\n  }\r\n\r\n\r\n\r\nexport default(CheckOut);\r\n"]},"metadata":{},"sourceType":"module"}